"use strict";(self.webpackChunksynthesia=self.webpackChunksynthesia||[]).push([[738],{9868:(e,n,a)=>{a.d(n,{_:()=>r,o:()=>i});const t="https://picsum.photos";async function r(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;const r=await fetch("".concat(t,"/v2/list?page=").concat(n,"&limit=").concat(a)),i=(await r.json()).map((e=>{let{id:n,author:a,download_url:t}=e;return{id:n,author:a,preview:"https://picsum.photos/id/".concat(n,"/200"),src:t}}));return{hasMore:!(null===(e=r.headers.get("Link"))||void 0===e||!e.includes('rel="next"')),images:i}}async function i(e){const n=await fetch("".concat(t,"/id/").concat(e,"/info")),{author:a,download_url:r,height:i,width:s}=await n.json();return{author:a,src:r,height:i,width:s}}},3738:(e,n,a)=>{a.r(n),a.d(n,{default:()=>v});var t=a(2791),r=a(7689),i=a(1933),s=a(4554),l=a(1473),c=a(5818),o=a(890),h=a(3721),d=a(1582),u=a(4294),g=a(1131),x=a(9868),m=a(4032);var j=a(184);const b=(0,t.forwardRef)(((e,n)=>{const a=(0,t.useRef)(null),r=n||a,{src:i,width:s,height:l,blur:c=0,grayscale:o=0}=e;return(0,t.useEffect)((()=>{r&&"current"in r&&r.current&&function(e,n,a,t){const r=e.getContext("2d");if(!r)throw Error("issue with 2d context on canvas");const i=new Image;i.crossOrigin="anonymous",i.src=n,i.onload=()=>{t&&(r.filter=Object.keys(t).map((e=>"".concat(e,"(").concat(t[e],")"))).join(" ")),r.drawImage(i,0,0,a[0],a[1])}}(r.current,i,[s,l],{blur:"".concat(c,"px"),grayscale:"".concat(o,"%")})}),[i,s,l,c,o,r]),(0,j.jsx)("canvas",{ref:r,height:l,width:s})}));var f=a(9768);function p(e){let{blur:n=0,grayscale:a=0,onChangeBlur:r,onChangeGrayscale:i}=e;const[l,c]=(0,t.useState)(n),[h,u]=(0,t.useState)(a);return(0,t.useEffect)((()=>{c(n)}),[n]),(0,t.useEffect)((()=>{u(a)}),[a]),(0,j.jsxs)(d.Z,{direction:"column",gap:1,padding:2,children:[(0,j.jsxs)(s.Z,{children:[(0,j.jsx)(o.Z,{id:"blur-slider",children:"Blur"}),(0,j.jsx)(f.ZP,{"aria-labelledby":"blur-slider",value:l,"aria-label":"Blur level",min:0,max:10,valueLabelDisplay:"auto",onChange:(e,n)=>c(Number(n)),onChangeCommitted:(e,n)=>{c(Number(n)),r(Number(n))}})]}),(0,j.jsxs)(s.Z,{children:[(0,j.jsx)(o.Z,{id:"grayscale-slider",children:"Grayscale (%)"}),(0,j.jsx)(f.ZP,{"aria-labelledby":"grayscale-slider",value:h,"aria-label":"Grayscale level",min:0,max:100,valueLabelDisplay:"auto",onChange:(e,n)=>u(Number(n)),onChangeCommitted:(e,n)=>{u(Number(n)),i(n)}})]})]})}var w=a(7017);function y(e){let{width:n,height:a,onChangeDimensions:r}=e;const[i,s]=(0,t.useState)(a.toString()),[l,c]=(0,t.useState)(n.toString());(0,t.useEffect)((()=>{s(a.toString())}),[a]),(0,t.useEffect)((()=>{c(n.toString())}),[n]);return(0,j.jsxs)(d.Z,{direction:"column",gap:1,padding:1,children:[(0,j.jsx)(w.Z,{required:!0,id:"outlined-required",label:"Width",value:l,onChange:e=>c(e.target.value),name:"width"}),(0,j.jsx)(w.Z,{required:!0,id:"outlined-required",label:"Height",value:i,onChange:e=>s(e.target.value),name:"height"}),(0,j.jsx)(u.Z,{variant:"contained",onClick:()=>{r(Number(l),Number(i))},children:"Apply"})]})}var Z=a(1087);function v(){const e=(0,t.useRef)(null),{imageId:n}=(0,r.UO)(),{isLoading:a,error:f,data:w}=(0,i.useQuery)({queryKey:["gallery",n],queryFn:()=>(0,x.o)(n),keepPreviousData:!0}),{width:v,height:C,blur:k,grayscale:D,onChangeBlur:S,onChangeGrayscale:N,onChangeDimensions:E}=function(){const[e,n]=(0,Z.lr)(),a=Number(e.get("width"));return{height:Number(e.get("height")),width:a,blur:Number(e.get("blur"))||0,grayscale:Number(e.get("grayscale"))||0,onChangeDimensions:(e,a)=>{n((n=>(n.set("width",e.toString()),n.set("height",a.toString()),n)))},onChangeBlur:e=>{n((n=>(n.set("blur",e.toString()),n)))},onChangeGrayscale:e=>{n((n=>(n.set("grayscale",e.toString()),n)))}}}();if(a)return(0,j.jsx)(m.g,{});if(!w||f)return(0,j.jsx)(j.Fragment,{children:"An error has occurred"});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(b,{ref:e,src:w.src,height:C||w.height,width:v||w.width,blur:k,grayscale:D}),(0,j.jsxs)(s.Z,{position:"fixed",top:50,right:50,bgcolor:"white",sx:{opacity:.8},children:[(0,j.jsxs)(l.Z,{children:[(0,j.jsx)(c.Z,{expandIcon:(0,j.jsx)(g.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,j.jsx)(o.Z,{children:"Dimensions"})}),(0,j.jsx)(h.Z,{children:(0,j.jsx)(y,{height:C||w.height,width:v||w.width,onChangeDimensions:E})})]}),(0,j.jsxs)(l.Z,{children:[(0,j.jsx)(c.Z,{expandIcon:(0,j.jsx)(g.Z,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:(0,j.jsx)(o.Z,{children:"Filters"})}),(0,j.jsx)(h.Z,{children:(0,j.jsx)(p,{blur:k,grayscale:D,onChangeBlur:S,onChangeGrayscale:N})})]}),(0,j.jsxs)(l.Z,{children:[(0,j.jsx)(c.Z,{expandIcon:(0,j.jsx)(g.Z,{}),"aria-controls":"panel3a-content",id:"panel3a-header",children:(0,j.jsx)(o.Z,{children:"Download"})}),(0,j.jsx)(h.Z,{children:(0,j.jsxs)(d.Z,{children:[(0,j.jsx)(u.Z,{variant:"contained",onClick:()=>{e.current&&function(e,n){const a=e.toDataURL(),t=document.createElement("a");t.download=n,t.href=a,t.click()}(e.current,"edited.png")},children:"Download Edited Image"}),(0,j.jsx)(u.Z,{onClick:()=>{!async function(e,n){const a=await fetch(e).then((e=>e.blob())),t=URL.createObjectURL(a);var r=document.createElement("a");r.href=t,r.download=n,r.click()}(w.src,"original.png")},children:"Download Original Image"})]})})]})]})]})}}}]);
//# sourceMappingURL=738.d9a6f7fc.chunk.js.map