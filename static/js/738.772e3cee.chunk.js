"use strict";(self.webpackChunksynthesia=self.webpackChunksynthesia||[]).push([[738],{9868:(e,n,a)=>{a.d(n,{_:()=>r,o:()=>i});const t="https://picsum.photos";async function r(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;const r=await fetch("".concat(t,"/v2/list?page=").concat(n,"&limit=").concat(a)),i=(await r.json()).map((e=>{let{id:n,author:a,download_url:t}=e;return{id:n,author:a,preview:"https://picsum.photos/id/".concat(n,"/200"),src:t}}));return{hasMore:!(null===(e=r.headers.get("Link"))||void 0===e||!e.includes('rel="next"')),images:i}}async function i(e){const n=await fetch("".concat(t,"/id/").concat(e,"/info")),{author:a,download_url:r,height:i,width:l}=await n.json();return{author:a,src:r,height:i,width:l}}},3738:(e,n,a)=>{a.r(n),a.d(n,{default:()=>v});var t=a(2791),r=a(7689),i=a(1933),l=a(4554),s=a(1473),c=a(5818),o=a(890),d=a(3721),h=a(1582),u=a(4294),g=a(1131),x=a(9868),j=a(4032);var f=a(184);const m=(0,t.forwardRef)(((e,n)=>{const a=(0,t.useRef)(null),r=n||a,{src:i,width:l,height:s,blur:c=0,grayscale:o=0}=e;return(0,t.useEffect)((()=>{r&&"current"in r&&r.current&&function(e,n,a,t){const r=e.getContext("2d");if(!r)throw Error("issue with 2d context on canvas");const i=new Image;i.crossOrigin="anonymous",i.src=n,i.onload=()=>{t&&(r.filter=Object.keys(t).map((e=>"".concat(e,"(").concat(t[e],")"))).join(" ")),r.drawImage(i,0,0,a[0],a[1])}}(r.current,i,[l,s],{blur:"".concat(c,"px"),grayscale:"".concat(o,"%")})}),[i,l,s,c,o,r]),(0,f.jsx)("canvas",{ref:r,height:s,width:l})}));var p=a(9768);function w(e){let{blur:n=0,grayscale:a=0,onChangeBlur:t,onChangeGrayscale:r}=e;return(0,f.jsxs)(h.Z,{direction:"column",gap:1,padding:2,children:[(0,f.jsxs)(l.Z,{children:[(0,f.jsx)(o.Z,{id:"blur-slider",children:"Blur"}),(0,f.jsx)(p.ZP,{"aria-labelledby":"blur-slider",defaultValue:n,"aria-label":"Blur level",min:0,max:10,valueLabelDisplay:"auto",onChangeCommitted:(e,n)=>t(n)})]}),(0,f.jsxs)(l.Z,{children:[(0,f.jsx)(o.Z,{id:"grayscale-slider",children:"Grayscale (%)"}),(0,f.jsx)(p.ZP,{"aria-labelledby":"grayscale-slider",defaultValue:a,"aria-label":"Grayscale level",min:0,max:100,valueLabelDisplay:"auto",onChangeCommitted:(e,n)=>r(n)})]})]})}var y=a(7017);function b(e){let{width:n,height:a,onChangeDimensions:r}=e;const i=(0,t.useRef)(null),l=(0,t.useRef)(null);return(0,f.jsxs)(h.Z,{direction:"column",gap:1,padding:1,children:[(0,f.jsx)(y.Z,{"data-testid":"width-textfield",inputRef:l,required:!0,id:"outlined-required",label:"Width",defaultValue:n}),(0,f.jsx)(y.Z,{"data-testid":"height-textfield",inputRef:i,required:!0,id:"outlined-required",label:"Height",defaultValue:a}),(0,f.jsx)(u.Z,{variant:"contained",onClick:()=>{l.current&&i.current&&r(Number(l.current.value),Number(i.current.value))},children:"Apply"})]})}var Z=a(1087);function v(){const e=(0,t.useRef)(null),{imageId:n}=(0,r.UO)(),{isLoading:a,error:p,data:y}=(0,i.useQuery)({queryKey:["gallery",n],queryFn:()=>(0,x.o)(n),keepPreviousData:!0}),{width:v,height:C,blur:k,grayscale:D,onChangeBlur:R,onChangeGrayscale:I,onChangeDimensions:L}=function(){const[e,n]=(0,Z.lr)(),a=Number(e.get("width")),t=Number(e.get("height")),r=Number(e.get("blur"))||0,i=Number(e.get("grayscale"))||0,l=(a,t)=>{let r=new URLSearchParams(e.toString());r.set(a,t),n(r.toString())};return{height:t,width:a,blur:r,grayscale:i,onChangeDimensions:(e,a)=>{n((n=>(n.set("width",e.toString()),n.set("height",a.toString()),n)))},onChangeBlur:e=>{l("blur",e.toString())},onChangeGrayscale:e=>{l("grayscale",e.toString())}}}();if(a)return(0,f.jsx)(j.g,{});if(!y||p)return(0,f.jsx)(f.Fragment,{children:"An error has occurred"});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m,{ref:e,src:y.src,height:C||y.height,width:v||y.width,blur:k,grayscale:D}),(0,f.jsxs)(l.Z,{position:"fixed",top:50,right:50,bgcolor:"white",sx:{opacity:.8},children:[(0,f.jsxs)(s.Z,{children:[(0,f.jsx)(c.Z,{expandIcon:(0,f.jsx)(g.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,f.jsx)(o.Z,{children:"Dimensions"})}),(0,f.jsx)(d.Z,{children:(0,f.jsx)(b,{height:C||y.height,width:v||y.width,onChangeDimensions:L})})]}),(0,f.jsxs)(s.Z,{children:[(0,f.jsx)(c.Z,{expandIcon:(0,f.jsx)(g.Z,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:(0,f.jsx)(o.Z,{children:"Filters"})}),(0,f.jsx)(d.Z,{children:(0,f.jsx)(w,{blur:k,grayscale:D,onChangeBlur:R,onChangeGrayscale:I})})]}),(0,f.jsxs)(s.Z,{children:[(0,f.jsx)(c.Z,{expandIcon:(0,f.jsx)(g.Z,{}),"aria-controls":"panel3a-content",id:"panel3a-header",children:(0,f.jsx)(o.Z,{children:"Download"})}),(0,f.jsx)(d.Z,{children:(0,f.jsxs)(h.Z,{children:[(0,f.jsx)(u.Z,{variant:"contained",onClick:()=>{e.current&&function(e,n){const a=e.toDataURL(),t=document.createElement("a");t.download=n,t.href=a,t.click()}(e.current,"edited.png")},children:"Download Edited Image"}),(0,f.jsx)(u.Z,{onClick:()=>{!async function(e,n){const a=await fetch(e).then((e=>e.blob())),t=URL.createObjectURL(a);var r=document.createElement("a");r.href=t,r.download=n,r.click()}(y.src,"original.png")},children:"Download Original Image"})]})})]})]})]})}}}]);
//# sourceMappingURL=738.772e3cee.chunk.js.map