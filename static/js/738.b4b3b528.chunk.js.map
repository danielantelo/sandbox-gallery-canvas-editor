{"version":3,"file":"static/js/738.b4b3b528.chunk.js","mappings":"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","sources":["api/gallery/query.ts","components/EditableImage/EditableImage.tsx","utils/canvas/imaging.ts","components/EditableImage/FilterControls.tsx","components/EditableImage/ResizeControls.tsx","pages/Editor/index.tsx","pages/Editor/useImageEdits.ts","utils/images/download.ts"],"sourcesContent":["const baseUrl = \"https://picsum.photos\";\n\ninterface ApiImage {\n  id: string;\n  author: string;\n  url: string;\n  width: number;\n  height: number;\n  download_url: string;\n}\n\nexport interface GalleryImagesResponse {\n  hasMore: boolean;\n  images: {\n    id: string;\n    author: string;\n    preview: string;\n    src: string;\n  }[];\n}\n\nexport async function fetchImages(\n  page = 1,\n  limit = 20\n): Promise<GalleryImagesResponse> {\n  const request = await fetch(`${baseUrl}/v2/list?page=${page}&limit=${limit}`);\n  const response: ApiImage[] = await request.json();\n  const images = response.map(({ id, author, download_url }) => {\n    // @TODO alidate this - preload source image to  be cached for editor use\n    // is it the best place for this?\n    const preloader = new Image();\n    preloader.src = download_url;\n    // return mapped version with a preview\n    return {\n      id,\n      author,\n      preview: `https://picsum.photos/id/${id}/200`,\n      src: download_url,\n    };\n  });\n\n  return {\n    hasMore: !!request.headers.get(\"Link\")?.includes('rel=\"next\"'),\n    images,\n  };\n}\n\nexport interface GalleryImageResponse {\n  author: string;\n  src: string;\n  height: number;\n  width: number;\n}\n\nexport async function fetchImage(id: string): Promise<GalleryImageResponse> {\n  const request = await fetch(`${baseUrl}/id/${id}/info`);\n  const { author, download_url, height, width }: ApiImage =\n    await request.json();\n\n  return {\n    author,\n    src: download_url,\n    height,\n    width,\n  };\n}\n","import { forwardRef, useEffect, useRef } from \"react\";\nimport { drawImage } from \"../../utils/canvas\";\n\nexport interface EditableImageProps {\n  src: string;\n  width: number;\n  height: number;\n  blur?: number;\n  grayscale?: number;\n}\n\nexport const EditableImage = forwardRef<HTMLCanvasElement, EditableImageProps>(\n  (props, ref) => {\n    const fallBackRef = useRef<HTMLCanvasElement>(null);\n    const canvasRef = ref || fallBackRef;\n    const { src, width, height, blur = 0, grayscale = 0 } = props;\n\n    useEffect(() => {\n      if (canvasRef && \"current\" in canvasRef && canvasRef.current) {\n        drawImage(canvasRef.current, src, [width, height], {\n          blur: `${blur}px`,\n          grayscale: `${grayscale}%`,\n        });\n      }\n    }, [src, width, height, blur, grayscale, canvasRef]);\n\n    return <canvas ref={canvasRef} height={height} width={width} />;\n  }\n);\n","export function drawImage(\n  canvas: HTMLCanvasElement,\n  src: string,\n  dimensions: [number, number],\n  filters?: { [key: string]: string }\n) {\n  const ctx = canvas.getContext(\"2d\");\n  if (!ctx) throw Error(\"issue with 2d context on canvas\");\n\n  const image = new Image();\n  // fix tainted exception for downloading x-origin\n  image.crossOrigin = \"anonymous\";\n  image.src = src;\n  image.onload = () => {\n    if (filters) {\n      ctx.filter = Object.keys(filters)\n        .map((key) => `${key}(${filters[key]})`)\n        .join(\" \");\n    }\n    ctx.drawImage(image, 0, 0, dimensions[0], dimensions[1]);\n  };\n}\n\nexport function downloadAsImage(canvas: HTMLCanvasElement, fileName: string) {\n  const imageContent = canvas.toDataURL();\n  const downloadLink = document.createElement(\"a\");\n  downloadLink.download = fileName;\n  downloadLink.href = imageContent;\n  downloadLink.click();\n}\n","import { Box, Slider, Stack, Typography } from \"@mui/material\";\nimport { SyntheticEvent, useEffect, useState } from \"react\";\n\ninterface FilterControlsProps {\n  blur: number;\n  grayscale: number;\n  onChangeBlur: (value: number) => void;\n  onChangeGrayscale: (value: number) => void;\n}\n\nexport function FilterControls({\n  blur = 0,\n  grayscale = 0,\n  onChangeBlur,\n  onChangeGrayscale,\n}: FilterControlsProps) {\n  const [currentBlur, setCurrentBlur] = useState<number>(blur);\n  const [currentGrayscale, setCurrentGrayscale] = useState<number>(grayscale);\n\n  const handleChangeBlur = (\n    e: Event | SyntheticEvent<Element, Event>,\n    value: number | number[]\n  ) => {\n    setCurrentBlur(Number(value));\n    onChangeBlur(Number(value));\n  };\n\n  const handleChangeGrayscale = (\n    e: Event | SyntheticEvent<Element, Event>,\n    value: number | number[]\n  ) => {\n    setCurrentGrayscale(Number(value));\n    onChangeGrayscale(value as number);\n  };\n\n  useEffect(() => {\n    setCurrentBlur(blur);\n  }, [blur]);\n\n  useEffect(() => {\n    setCurrentGrayscale(grayscale);\n  }, [grayscale]);\n\n  return (\n    <Stack direction={\"column\"} gap={1} padding={2}>\n      <Box>\n        <Typography id=\"blur-slider\">Blur</Typography>\n        <Slider\n          aria-labelledby=\"blur-slider\"\n          value={currentBlur}\n          aria-label=\"Blur level\"\n          min={0}\n          max={10}\n          valueLabelDisplay=\"auto\"\n          onChange={(e, value: number | number[]) => setCurrentBlur(Number(value))}\n          onChangeCommitted={handleChangeBlur}\n        />\n      </Box>\n      <Box>\n        <Typography id=\"grayscale-slider\">Grayscale (%)</Typography>\n        <Slider\n          aria-labelledby=\"grayscale-slider\"\n          value={currentGrayscale}\n          aria-label=\"Grayscale level\"\n          min={0}\n          max={100}\n          valueLabelDisplay=\"auto\"\n          onChange={(e, value: number | number[]) => setCurrentGrayscale(Number(value))}\n          onChangeCommitted={handleChangeGrayscale}\n        />\n      </Box>\n    </Stack>\n  );\n}\n","import { Button, Stack, TextField } from \"@mui/material\";\nimport { ChangeEvent, useEffect, useState } from \"react\";\n\nexport interface ResizeControlsProps {\n  height: number;\n  width: number;\n  onChangeDimensions: (width: number, height: number) => void;\n}\n\nexport function ResizeControls({\n  width,\n  height,\n  onChangeDimensions,\n}: ResizeControlsProps) {\n  const [currentHeight, setCurrentHeight] = useState<string>(height.toString());\n  const [currentWidth, setCurrentWidth] = useState<string>(width.toString());\n\n  const onChangeWidth = (\n    e: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => setCurrentWidth(e.target.value);\n\n  const onChangeHeight = (\n    e: ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n  ) => setCurrentHeight(e.target.value);\n\n  useEffect(() => {\n    setCurrentHeight(height.toString());\n  }, [height]);\n\n  useEffect(() => {\n    setCurrentWidth(width.toString());\n  }, [width]);\n\n  const handleApply = () => {\n    onChangeDimensions(Number(currentWidth), Number(currentHeight));\n  };\n\n  return (\n    <Stack direction={\"column\"} gap={1} padding={1}>\n      <TextField\n        data-testid={\"width-textfield\"}\n        required\n        id=\"outlined-required\"\n        label=\"Width\"\n        value={currentWidth}\n        onChange={onChangeWidth}\n      />\n      <TextField\n        data-testid={\"height-textfield\"}\n        required\n        id=\"outlined-required\"\n        label=\"Height\"\n        value={currentHeight}\n        onChange={onChangeHeight}\n      />\n      <Button variant=\"contained\" onClick={handleApply}>\n        Apply\n      </Button>\n    </Stack>\n  );\n}\n","import { useRef } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useQuery } from \"react-query\";\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Box,\n  Button,\n  Stack,\n  Typography,\n} from \"@mui/material\";\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\nimport { fetchImage } from \"../../api/gallery\";\nimport { Loading } from \"../../components/Loading\";\nimport {\n  EditableImage,\n  FilterControls,\n  ResizeControls,\n} from \"../../components/EditableImage\";\nimport { downloadAsImage } from \"../../utils/canvas\";\nimport { downloadImage } from \"../../utils/images\";\nimport { useImageEdits } from \"./useImageEdits\";\n\nexport default function Editor() {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const { imageId } = useParams<{ imageId: string }>();\n  const { isLoading, error, data } = useQuery({\n    queryKey: [\"gallery\", imageId],\n    queryFn: () => fetchImage(imageId!),\n    keepPreviousData: true,\n  });\n  const {\n    width,\n    height,\n    blur,\n    grayscale,\n    onChangeBlur,\n    onChangeGrayscale,\n    onChangeDimensions,\n  } = useImageEdits();\n\n  if (isLoading) return <Loading />;\n  if (!data || error) return <>An error has occurred</>;\n\n  const onDownloadImage = () => {\n    if (canvasRef.current) {\n      downloadAsImage(canvasRef.current, \"edited.png\");\n    }\n  };\n\n  const onDownloadOriginal = () => {\n    downloadImage(data.src, 'original.png');\n  };\n\n  return (\n    <>\n      <EditableImage\n        ref={canvasRef}\n        src={data.src}\n        height={height || data.height}\n        width={width || data.width}\n        blur={blur}\n        grayscale={grayscale}\n      />\n      <Box\n        position={\"fixed\"}\n        top={50}\n        right={50}\n        bgcolor={\"white\"}\n        sx={{ opacity: 0.8 }}\n      >\n        <Accordion>\n          <AccordionSummary\n            expandIcon={<ExpandMoreIcon />}\n            aria-controls=\"panel1a-content\"\n            id=\"panel1a-header\"\n          >\n            <Typography>Dimensions</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <ResizeControls\n              height={height || data.height}\n              width={width || data.width}\n              onChangeDimensions={onChangeDimensions}\n            />\n          </AccordionDetails>\n        </Accordion>\n        <Accordion>\n          <AccordionSummary\n            expandIcon={<ExpandMoreIcon />}\n            aria-controls=\"panel2a-content\"\n            id=\"panel2a-header\"\n          >\n            <Typography>Filters</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <FilterControls\n              blur={blur}\n              grayscale={grayscale}\n              onChangeBlur={onChangeBlur}\n              onChangeGrayscale={onChangeGrayscale}\n            />\n          </AccordionDetails>\n        </Accordion>\n        <Accordion>\n          <AccordionSummary\n            expandIcon={<ExpandMoreIcon />}\n            aria-controls=\"panel3a-content\"\n            id=\"panel3a-header\"\n          >\n            <Typography>Download</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <Stack>\n              <Button variant=\"contained\" onClick={onDownloadImage}>\n                Download Edited Image\n              </Button>\n              <Button onClick={onDownloadOriginal}>\n                Download Original Image\n              </Button>\n            </Stack>\n          </AccordionDetails>\n        </Accordion>\n      </Box>\n    </>\n  );\n}\n","import { useSearchParams } from \"react-router-dom\";\n\nexport function useImageEdits() {\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  const width = Number(searchParams.get(\"width\"));\n  const height = Number(searchParams.get(\"height\"));\n  const blur = Number(searchParams.get(\"blur\")) || 0;\n  const grayscale = Number(searchParams.get(\"grayscale\")) || 0;\n\n  const updateSearchParam = (key: string, value: string) => {\n    let updatedSearchParams = new URLSearchParams(searchParams.toString());\n    updatedSearchParams.set(key, value);\n    setSearchParams(updatedSearchParams.toString());\n  };\n\n  const onChangeBlur = (value: number) => {\n    updateSearchParam(\"blur\", value.toString());\n  };\n\n  const onChangeGrayscale = (value: number) => {\n    updateSearchParam(\"grayscale\", value.toString());\n  };\n\n  const onChangeDimensions = (width: number, height: number) => {\n    setSearchParams((searchParams) => {\n      searchParams.set(\"width\", width.toString());\n      searchParams.set(\"height\", height.toString());\n      return searchParams;\n    });\n  };\n\n  return {\n    height,\n    width,\n    blur,\n    grayscale,\n    onChangeDimensions,\n    onChangeBlur,\n    onChangeGrayscale,\n  };\n}\n","export async function downloadImage(src: string, fileName: string) {\n  const blob = await fetch(src).then((res) => res.blob());\n  const content = URL.createObjectURL(blob);\n  var link = document.createElement(\"a\");\n  link.href = content;\n  link.download = fileName;\n  link.click();\n}\n"],"names":["baseUrl","async","fetchImages","_request$headers$get","page","arguments","length","undefined","limit","request","fetch","concat","images","json","map","_ref","id","author","download_url","Image","src","preview","hasMore","headers","get","includes","fetchImage","height","width","EditableImage","forwardRef","props","ref","fallBackRef","useRef","canvasRef","blur","grayscale","useEffect","current","canvas","dimensions","filters","ctx","getContext","Error","image","crossOrigin","onload","filter","Object","keys","key","join","drawImage","_jsx","FilterControls","onChangeBlur","onChangeGrayscale","currentBlur","setCurrentBlur","useState","currentGrayscale","setCurrentGrayscale","_jsxs","Stack","direction","gap","padding","children","Box","Typography","Slider","value","min","max","valueLabelDisplay","onChange","e","Number","onChangeCommitted","handleChangeBlur","handleChangeGrayscale","ResizeControls","onChangeDimensions","currentHeight","setCurrentHeight","toString","currentWidth","setCurrentWidth","TextField","required","label","target","Button","variant","onClick","handleApply","Editor","imageId","useParams","isLoading","error","data","useQuery","queryKey","queryFn","keepPreviousData","searchParams","setSearchParams","useSearchParams","updateSearchParam","updatedSearchParams","URLSearchParams","set","useImageEdits","Loading","_Fragment","position","top","right","bgcolor","sx","opacity","Accordion","AccordionSummary","expandIcon","ExpandMoreIcon","AccordionDetails","onDownloadImage","fileName","imageContent","toDataURL","downloadLink","document","createElement","download","href","click","downloadAsImage","onDownloadOriginal","blob","then","res","content","URL","createObjectURL","link","downloadImage"],"sourceRoot":""}