"use strict";(self.webpackChunksynthesia=self.webpackChunksynthesia||[]).push([[738],{9868:(e,n,t)=>{t.d(n,{_:()=>r,o:()=>i});const a="https://picsum.photos";async function r(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;const r=await fetch("".concat(a,"/v2/list?page=").concat(n,"&limit=").concat(t)),i=(await r.json()).map((e=>{let{id:n,author:t,download_url:a}=e;return{id:n,author:t,preview:"https://picsum.photos/id/".concat(n,"/200"),src:a}}));return{hasMore:!(null===(e=r.headers.get("Link"))||void 0===e||!e.includes('rel="next"')),images:i}}async function i(e){const n=await fetch("".concat(a,"/id/").concat(e,"/info")),{author:t,download_url:r,height:i,width:s}=await n.json();return{author:t,src:r,height:i,width:s}}},3738:(e,n,t)=>{t.r(n),t.d(n,{default:()=>v});var a=t(2791),r=t(7689),i=t(1933),s=t(4554),l=t(1473),c=t(5818),o=t(890),d=t(3721),h=t(1582),u=t(4294),g=t(1131),x=t(9868),m=t(4032);var j=t(184);const f=(0,a.forwardRef)(((e,n)=>{const t=(0,a.useRef)(null),r=n||t,{src:i,width:s,height:l,blur:c=0,grayscale:o=0}=e;return(0,a.useEffect)((()=>{r&&"current"in r&&r.current&&function(e,n,t,a){const r=e.getContext("2d");if(!r)throw Error("issue with 2d context on canvas");const i=new Image;i.crossOrigin="anonymous",i.src=n,i.onload=()=>{a&&(r.filter=Object.keys(a).map((e=>"".concat(e,"(").concat(a[e],")"))).join(" ")),r.drawImage(i,0,0,t[0],t[1])}}(r.current,i,[s,l],{blur:"".concat(c,"px"),grayscale:"".concat(o,"%")})}),[i,s,l,c,o,r]),(0,j.jsx)("canvas",{ref:r,height:l,width:s})}));var b=t(9768);function p(e){let{blur:n=0,grayscale:t=0,onChangeBlur:r,onChangeGrayscale:i}=e;const[l,c]=(0,a.useState)(n),[d,u]=(0,a.useState)(t);return(0,a.useEffect)((()=>{c(n)}),[n]),(0,a.useEffect)((()=>{u(t)}),[t]),(0,j.jsxs)(h.Z,{direction:"column",gap:1,padding:2,children:[(0,j.jsxs)(s.Z,{children:[(0,j.jsx)(o.Z,{id:"blur-slider",children:"Blur"}),(0,j.jsx)(b.ZP,{"aria-labelledby":"blur-slider",value:l,"aria-label":"Blur level",min:0,max:10,valueLabelDisplay:"auto",onChange:(e,n)=>c(Number(n)),onChangeCommitted:(e,n)=>{c(Number(n)),r(Number(n))}})]}),(0,j.jsxs)(s.Z,{children:[(0,j.jsx)(o.Z,{id:"grayscale-slider",children:"Grayscale (%)"}),(0,j.jsx)(b.ZP,{"aria-labelledby":"grayscale-slider",value:d,"aria-label":"Grayscale level",min:0,max:100,valueLabelDisplay:"auto",onChange:(e,n)=>u(Number(n)),onChangeCommitted:(e,n)=>{u(Number(n)),i(n)}})]})]})}var w=t(7017);function y(e){let{width:n,height:t,onChangeDimensions:r}=e;const[i,s]=(0,a.useState)(t.toString()),[l,c]=(0,a.useState)(n.toString());(0,a.useEffect)((()=>{s(t.toString())}),[t]),(0,a.useEffect)((()=>{c(n.toString())}),[n]);return(0,j.jsxs)(h.Z,{direction:"column",gap:1,padding:1,children:[(0,j.jsx)(w.Z,{"data-testid":"width-textfield",required:!0,id:"outlined-required",label:"Width",value:l,onChange:e=>c(e.target.value)}),(0,j.jsx)(w.Z,{"data-testid":"height-textfield",required:!0,id:"outlined-required",label:"Height",value:i,onChange:e=>s(e.target.value)}),(0,j.jsx)(u.Z,{variant:"contained",onClick:()=>{r(Number(l),Number(i))},children:"Apply"})]})}var Z=t(1087);function v(){const e=(0,a.useRef)(null),{imageId:n}=(0,r.UO)(),{isLoading:t,error:b,data:w}=(0,i.useQuery)({queryKey:["gallery",n],queryFn:()=>(0,x.o)(n),keepPreviousData:!0}),{width:v,height:C,blur:k,grayscale:D,onChangeBlur:S,onChangeGrayscale:N,onChangeDimensions:E}=function(){const[e,n]=(0,Z.lr)(),t=Number(e.get("width"));return{height:Number(e.get("height")),width:t,blur:Number(e.get("blur"))||0,grayscale:Number(e.get("grayscale"))||0,onChangeDimensions:(e,t)=>{n((n=>(n.set("width",e.toString()),n.set("height",t.toString()),n)))},onChangeBlur:e=>{n((n=>(n.set("blur",e.toString()),n)))},onChangeGrayscale:e=>{n((n=>(n.set("grayscale",e.toString()),n)))}}}();if(t)return(0,j.jsx)(m.g,{});if(!w||b)return(0,j.jsx)(j.Fragment,{children:"An error has occurred"});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(f,{ref:e,src:w.src,height:C||w.height,width:v||w.width,blur:k,grayscale:D}),(0,j.jsxs)(s.Z,{position:"fixed",top:50,right:50,bgcolor:"white",sx:{opacity:.8},children:[(0,j.jsxs)(l.Z,{children:[(0,j.jsx)(c.Z,{expandIcon:(0,j.jsx)(g.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,j.jsx)(o.Z,{children:"Dimensions"})}),(0,j.jsx)(d.Z,{children:(0,j.jsx)(y,{height:C||w.height,width:v||w.width,onChangeDimensions:E})})]}),(0,j.jsxs)(l.Z,{children:[(0,j.jsx)(c.Z,{expandIcon:(0,j.jsx)(g.Z,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:(0,j.jsx)(o.Z,{children:"Filters"})}),(0,j.jsx)(d.Z,{children:(0,j.jsx)(p,{blur:k,grayscale:D,onChangeBlur:S,onChangeGrayscale:N})})]}),(0,j.jsxs)(l.Z,{children:[(0,j.jsx)(c.Z,{expandIcon:(0,j.jsx)(g.Z,{}),"aria-controls":"panel3a-content",id:"panel3a-header",children:(0,j.jsx)(o.Z,{children:"Download"})}),(0,j.jsx)(d.Z,{children:(0,j.jsxs)(h.Z,{children:[(0,j.jsx)(u.Z,{variant:"contained",onClick:()=>{e.current&&function(e,n){const t=e.toDataURL(),a=document.createElement("a");a.download=n,a.href=t,a.click()}(e.current,"edited.png")},children:"Download Edited Image"}),(0,j.jsx)(u.Z,{onClick:()=>{!async function(e,n){const t=await fetch(e).then((e=>e.blob())),a=URL.createObjectURL(t);var r=document.createElement("a");r.href=a,r.download=n,r.click()}(w.src,"original.png")},children:"Download Original Image"})]})})]})]})]})}}}]);
//# sourceMappingURL=738.d9386af3.chunk.js.map